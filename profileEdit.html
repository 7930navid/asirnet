<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Page title</title>
    <style>
        body {
            padding: 20px;
            aling-item: left;
            padding-top: 100px;
        }
        hr{
            width: 100%;
            background: black;
        }
#header { 
       display:flex; 
       align-items:center; 
       justify-content:space-between; 
       padding:20px; 
       background:white; 
       border-bottom:3px solid green; 
       width: 940px;
       position: fixed;
       z-index: 1000;
       top: 0;
       left: 0;
       }
       
#header button { 
       width:50px; 
       height:50px; 
       border:2px solid red; 
       border-radius:8px; background:white; 
       cursor:pointer; 
       box-shadow:0 0 8px red; 
       color: red;
       font-size: 30px;
       }

        #bio {
    width: 600px;
    margin-top: 7px;
    border: 1px solid black;
    border-radius: 20px;
    min-height: 50px;
    max-height: 100px;
    padding: 20px;
    margin: 15px;
    font-size: 20px;
    color: black;
    font-family: 'SolaimanLipi', 'Noto Sans Bengali', Arial, sans-serif;
  
}
      input {
            padding: 15px;
            margin: 10px;
            color: black;
            font-size: 14px;
            background: rgba(0,0,0,0.1);
            border: 2px solid black;
            width: 600px;
            border-radius: 20px;
        }
input:focus {
            box-shadow : 0 0 10px gray;
        }
#addAvattar{
    display: flex;
    background: rgba(0,0,0,0.1);
    border: 2px solid black;
    border-radius: 15px;
    padding-top: 5px;
    padding-bottom: 5px;
    margin: 15px;
    width: 640px;
}
#addAvattar div{
    height: 0px;
    width:  80%;
    color: black;
    border: none;
    margin: 10px;
}
#addAvattar button {
    background: none;
    padding: none;
    border: none;    
    border-left: 1px solid gray;
    border-radius: 0px;
    height: 100%;
    width: 20%;
    font-size: 30px;
}
#submit {
    width: 20%;
    background: lightyellow;
    padding: 15px;
    font-size: 30px;
    border-radius: 20px;
    border: 2px solid green;
    color: green;
    margin-top: 20px;
}
#delete {
    width: 30%;
    background: lightpink;
    padding: 15px;
    font-size: 30px;
    border-radius: 20px;
    border: 2px solid red;
    color: red;
    margin-top: 20px;
    margin-right: 20px;
    margin-left: 20px;
}

#listofavatar {
    display: none;
    position: absolute;
    z-index:1000;
    background: white;
    border: 1px solid black;
    border-radius: 20px;
    padding: 20px;
    overflow: auto;
    height: 300px;
    top: 750px;
    left: 180px;
}
#listofavatar table{
    background: none;
    position: relative;
}
#listofavatar button{
    background: rgba(255,150,150,0.3);
    border: none;
    border-radius: 20px;
    height: 70px;
    width: 70px;
    margin: 10px;
    font-size: 30px;
  transition: transform 0.3s;
  }
.alert{
    margin-left: 25px;
    color: red;
}
#modal {
    position: fixed;
    z-index: 1000;
    top: 0;
    left: 0;
    height: 100%;
    width: 100%;
    display: none;
    align-items: center;
    justify-content: center;
    background: rgba(0,0,0,0.4);
}
#modal div {
    padding: 20px;
    padding-top: 10px;
    width: 50%;
    background: white;
    border-radius: 20px;
    border: 3px solid red;
    box-shadow: 0 0 5px white;
}
#modal p {
    color: black;
    font-size: 15px;
}
#modal span {
    color: red;
    font-size: 15px;
}
#modal input {
    width: 90%;
    margin-top: 15px;
    border: none;
    border-bottom: 3px solid rgba(0,0,0,0.2);
    padding: 10px;
    text-align: center;
    font-size: 20px;
    color: red;
    background: none;
    border-radius: 0px;
}
#modal button {
    margin: 15px;
    padding: 10px;
    width: 20%;
    border: 2px solid red;
    border-radius: 10px;
    background: lightyellow;
    color: red;
    font-size: 14px;
}
.crossBtn {
    background: none;
    border: none;
}

   </style>
</head>
<body>
 <div id="header">
<a href="https://ibb.co.com/PZ1vZJyp"><img src="https://i.ibb.co.com/wNpFN8qH/IMG-20251103-150220.jpg" alt="Logo" width="200px"></a>
  <a href="/AsirNet.html"><button>Ã—</button></a>
</div>


<h3>Your New Name..</h3><hr>
 <input type="text" placeholder="Enter your name..." id="username"/><br>
 <div id="alertname" class="alert"></div>
 
<h3>Your New access key..</h3><hr>
 <input type="password" placeholder="Enter your access key..." id="password"/><br>
 <div id="alertpass" class="alert"></div>
 
 <h3>Your New Focus..</h3><hr>
       <textarea id="bio" placeholder="Add a focus or goal"></textarea> <br>
 <h3>Your New Avatar..</h3><hr>
       <div id="addAvattar">
          <div id="addAvatar">Choose an Avatar..</div>
           
          <button onclick="progileAvatar()"> â–¼</button>
       </div> 
 
    <br>
 <div style="text-align: right;">
        <button onclick="deletethisprofile()" id="delete">Delete Account </button>
              <button onclick="checking()" id="submit">Submit </button>
       
</div>
  <div id="listofavatar">
<div style="text-align: right;"><button onclick="closealert('listofavatar')" class="crossbtn" style="background: none; color: red; font-size: 25px;">Ã—</button></div>
     <br>
    <table>
        <tr>
            <td><button onclick="appendAvatar('ğŸ˜€')">ğŸ˜€</button></td>
            <td><button onclick="appendAvatar('ğŸ˜')">ğŸ˜</button></td>
            <td><button onclick="appendAvatar('ğŸ¤©')">ğŸ¤©</button></td>
            <td><button onclick="appendAvatar('ğŸ˜‡')">ğŸ˜‡</button></td>
            <td><button onclick="appendAvatar('ğŸ¥³')">ğŸ¥³</button></td>
        </tr>
        <tr>
            <td><button onclick="appendAvatar('ğŸ˜‹')">ğŸ˜‹</button></td>
            <td><button onclick="appendAvatar('ğŸ¤“')">ğŸ¤“</button></td>
            <td><button onclick="appendAvatar('ğŸ˜œ')">ğŸ˜œ</button></td>
            <td><button onclick="appendAvatar('ğŸ¤”')">ğŸ¤”</button></td>
            <td><button onclick="appendAvatar('ğŸ˜')">ğŸ˜</button></td>
        </tr>
        <tr>
            <td><button onclick="appendAvatar('ğŸ˜´')">ğŸ˜´</button></td>
            <td><button onclick="appendAvatar('ğŸ¥º')">ğŸ¥º</button></td>
            <td><button onclick="appendAvatar('ğŸ˜¡')">ğŸ˜¡</button></td>
            <td><button onclick="appendAvatar('ğŸ¤¯')">ğŸ¤¯</button></td>
            <td><button onclick="appendAvatar('ğŸ¤—')">ğŸ¤—</button></td>
        </tr>

<tr>
    <td><button onclick="appendAvatar('ğŸ˜±')">ğŸ˜±</button></td>
    <td><button onclick="appendAvatar('ğŸ˜ˆ')">ğŸ˜ˆ</button></td>
    <td><button onclick="appendAvatar('ğŸ‘»')">ğŸ‘»</button></td>
    <td><button onclick="appendAvatar('ğŸŒŸ')">ğŸŒŸ</button></td>
    <td><button onclick="appendAvatar('ğŸ¤¡')">ğŸ¤¡</button></td>
</tr>

<tr>
    <td><button onclick="appendAvatar('ğŸ˜º')">ğŸ˜º</button></td>
    <td><button onclick="appendAvatar('ğŸ˜¸')">ğŸ˜¸</button></td>
    <td><button onclick="appendAvatar('ğŸ˜¹')">ğŸ˜¹</button></td>
    <td><button onclick="appendAvatar('ğŸ˜»')">ğŸ˜»</button></td>
    <td><button onclick="appendAvatar('ğŸ˜¼')">ğŸ˜¼</button></td>
</tr>
<tr>
    <td><button onclick="appendAvatar('ğŸ˜½')">ğŸ˜½</button></td>
    <td><button onclick="appendAvatar('ğŸ™€')">ğŸ™€</button></td>
    <td><button onclick="appendAvatar('ğŸ˜¿')">ğŸ˜¿</button></td>
    <td><button onclick="appendAvatar('ğŸ˜¾')">ğŸ˜¾</button></td>
    <td><button onclick="appendAvatar('ğŸ¤‘')">ğŸ¤‘</button></td>
</tr>
<tr>
    <td><button onclick="appendAvatar('ğŸ¤ ')">ğŸ¤ </button></td>
    <td><button onclick="appendAvatar('ğŸ¥´')">ğŸ¥´</button></td>
    <td><button onclick="appendAvatar('ğŸ¤¢')">ğŸ¤¢</button></td>
    <td><button onclick="appendAvatar('ğŸ¤®')">ğŸ¤®</button></td>
    <td><button onclick="appendAvatar('ğŸ¤§')">ğŸ¤§</button></td>
</tr>
<tr>
    <td><button onclick="appendAvatar('ğŸ¥µ')">ğŸ¥µ</button></td>
    <td><button onclick="appendAvatar('ğŸ¥¶')">ğŸ¥¶</button></td>
    <td><button onclick="appendAvatar('ğŸ¥·')">ğŸ¥·</button></td>
    <td><button onclick="appendAvatar('ğŸ¦¸')">ğŸ¦¸</button></td>
    <td><button onclick="appendAvatar('ğŸ¦¹')">ğŸ¦¹</button></td>
</tr>
<tr>
    <td><button onclick="appendAvatar('ğŸ§™')">ğŸ§™</button></td>
    <td><button onclick="appendAvatar('ğŸ§š')">ğŸ§š</button></td>
    <td><button onclick="appendAvatar('ğŸ§›')">ğŸ§›</button></td>
    <td><button onclick="appendAvatar('ğŸ§œ')">ğŸ§œ</button></td>
    <td><button onclick="appendAvatar('ğŸ§')">ğŸ§</button></td>
</tr>
<tr>
    <td><button onclick="appendAvatar('ğŸ§')">ğŸ§</button></td>
    <td><button onclick="appendAvatar('ğŸ§Ÿ')">ğŸ§Ÿ</button></td>
    <td><button onclick="appendAvatar('ğŸ§–')">ğŸ§–</button></td>
    <td><button onclick="appendAvatar('ğŸ§—')">ğŸ§—</button></td>
    <td><button onclick="appendAvatar('ğŸ§˜')">ğŸ§˜</button></td>
</tr>
<tr>
    <td><button onclick="appendAvatar('ğŸ›¸')">ğŸ›¸</button></td>
    <td><button onclick="appendAvatar('ğŸ›·')">ğŸ›·</button></td>
    <td><button onclick="appendAvatar('ğŸ›¹')">ğŸ›¹</button></td>
    <td><button onclick="appendAvatar('ğŸ›¼')">ğŸ›¼</button></td>
    <td><button onclick="appendAvatar('ğŸ›¶')">ğŸ›¶</button></td>
</tr>
<tr>
    <td><button onclick="appendAvatar('ğŸƒ')">ğŸƒ</button></td>
    <td><button onclick="appendAvatar('ğŸ„')">ğŸ„</button></td>
    <td><button onclick="appendAvatar('ğŸ†')">ğŸ†</button></td>
    <td><button onclick="appendAvatar('ğŸ‡')">ğŸ‡</button></td>
    <td><button onclick="appendAvatar('ğŸˆ')">ğŸˆ</button></td>
</tr>
<tr>
    <td><button onclick="appendAvatar('ğŸ‰')">ğŸ‰</button></td>
    <td><button onclick="appendAvatar('ğŸŠ')">ğŸŠ</button></td>
    <td><button onclick="appendAvatar('ğŸ‹')">ğŸ‹</button></td>
    <td><button onclick="appendAvatar('ğŸ')">ğŸ</button></td>
    <td><button onclick="appendAvatar('ğŸ')">ğŸ</button></td>
</tr>
<tr>
    <td><button onclick="appendAvatar('ğŸ')">ğŸ</button></td>
    <td><button onclick="appendAvatar('ğŸ')">ğŸ</button></td>
    <td><button onclick="appendAvatar('ğŸ‘')">ğŸ‘</button></td>
    <td><button onclick="appendAvatar('ğŸ€')">ğŸ€</button></td>
    <td><button onclick="appendAvatar('ğŸ')">ğŸ</button></td>
</tr>
<tr>
    <td><button onclick="appendAvatar('ğŸ“')">ğŸ“</button></td>
    <td><button onclick="appendAvatar('ğŸ®')">ğŸ®</button></td>
    <td><button onclick="appendAvatar('ğŸ¯')">ğŸ¯</button></td>
    <td><button onclick="appendAvatar('ğŸ°')">ğŸ°</button></td>
    <td><button onclick="appendAvatar('ğŸ±')">ğŸ±</button></td>
</tr>
<tr>
    <td><button onclick="appendAvatar('ğŸ²')">ğŸ²</button></td>
    <td><button onclick="appendAvatar('ğŸ³')">ğŸ³</button></td>
    <td><button onclick="appendAvatar('ğŸ´')">ğŸ´</button></td>
    <td><button onclick="appendAvatar('ğŸµ')">ğŸµ</button></td>
    <td><button onclick="appendAvatar('ğŸ¶')">ğŸ¶</button></td>
</tr>
<tr>
    <td><button onclick="appendAvatar('ğŸ·')">ğŸ·</button></td>
    <td><button onclick="appendAvatar('ğŸ¸')">ğŸ¸</button></td>
    <td><button onclick="appendAvatar('ğŸ¹')">ğŸ¹</button></td>
    <td><button onclick="appendAvatar('ğŸº')">ğŸº</button></td>
    <td><button onclick="appendAvatar('ğŸ»')">ğŸ»</button></td>
</tr>
<tr>
    <td><button onclick="appendAvatar('ğŸ¥')">ğŸ¥</button></td>
    <td><button onclick="appendAvatar('ğŸª•')">ğŸª•</button></td>
    <td><button onclick="appendAvatar('ğŸª—')">ğŸª—</button></td>
    <td><button onclick="appendAvatar('ğŸª˜')">ğŸª˜</button></td>
    <td><button onclick="appendAvatar('ğŸª‡')">ğŸª‡</button></td>
</tr>
<tr>
    <td><button onclick="appendAvatar('ğŸ§¸')">ğŸ§¸</button></td>
    <td><button onclick="appendAvatar('ğŸª…')">ğŸª…</button></td>
    <td><button onclick="appendAvatar('ğŸª†')">ğŸª†</button></td>
    <td><button onclick="appendAvatar('ğŸªƒ')">ğŸªƒ</button></td>
    <td><button onclick="appendAvatar('ğŸª')">ğŸª</button></td>
</tr>
<tr>
    <td><button onclick="appendAvatar('ğŸ›¹')">ğŸ›¹</button></td>
    <td><button onclick="appendAvatar('ğŸ›¶')">ğŸ›¶</button></td>
    <td><button onclick="appendAvatar('ğŸ›´')">ğŸ›´</button></td>
    <td><button onclick="appendAvatar('ğŸ›µ')">ğŸ›µ</button></td>
    <td><button onclick="appendAvatar('ğŸš²')">ğŸš²</button></td>
</tr>
<tr>
    <td><button onclick="appendAvatar('ğŸš—')">ğŸš—</button></td>
    <td><button onclick="appendAvatar('ğŸš•')">ğŸš•</button></td>
    <td><button onclick="appendAvatar('ğŸš™')">ğŸš™</button></td>
    <td><button onclick="appendAvatar('ğŸšŒ')">ğŸšŒ</button></td>
    <td><button onclick="appendAvatar('ğŸš')">ğŸš</button></td>
</tr>
<tr>
    <td><button onclick="appendAvatar('ğŸï¸')">ğŸï¸</button></td>
    <td><button onclick="appendAvatar('ğŸš“')">ğŸš“</button></td>
    <td><button onclick="appendAvatar('ğŸš‘')">ğŸš‘</button></td>
    <td><button onclick="appendAvatar('ğŸš’')">ğŸš’</button></td>
    <td><button onclick="appendAvatar('ğŸš')">ğŸš</button></td>
</tr>
<tr>
    <td><button onclick="appendAvatar('ğŸ›»')">ğŸ›»</button></td>
    <td><button onclick="appendAvatar('ğŸšš')">ğŸšš</button></td>
    <td><button onclick="appendAvatar('ğŸš›')">ğŸš›</button></td>
    <td><button onclick="appendAvatar('ğŸšœ')">ğŸšœ</button></td>
    <td><button onclick="appendAvatar('ğŸ¦½')">ğŸ¦½</button></td>
</tr>
<tr>
    <td><button onclick="appendAvatar('ğŸ›º')">ğŸ›º</button></td>
    <td><button onclick="appendAvatar('ğŸï¸')">ğŸï¸</button></td>
    <td><button onclick="appendAvatar('ğŸ›µ')">ğŸ›µ</button></td>
    <td><button onclick="appendAvatar('ğŸ›´')">ğŸ›´</button></td>
    <td><button onclick="appendAvatar('ğŸ›¹')">ğŸ›¹</button></td>
</tr>    </table>
</div> 

<div id="modal">
    <div>
        <p>Enter here your access key to verify that it's you...</p>
        <input type="password" id="checkPassword" placeholder="Enter here.." ><br>
  <section id="alert"></section><br>
        <section style="text-align: right;">
        <button onclick="authenticationCheck()">OK</button>
        </section>
    </div>
</div>



        
<script>
 
 function progileAvatar() {
   document.querySelector("#listofavatar").style.display = 'block'; 
 } 

 function appendAvatar(avatar) {
   document.getElementById('addAvatar').innerHTML = avatar;
   closealert('listofavatar');
 }

 function closealert(alertId) {  
   document.getElementById(alertId).style.display = 'none';
 }
async function deletethisprofile() {
    const user = JSON.parse(localStorage.getItem("user"));
    if (!user || !user.email) {
        alert("No user logged in!");
        return;
    }

    if (!confirm("Are you sure you want to delete this account?")) {
        return;
    }

    try {
        const res = await fetch(`https://asirnet-backend.onrender.com/deleteuser/${user.email}`, {
            method: "DELETE"
        });
        const data = await res.json();

        if (res.ok) {
            alert(data.message || "Account deleted successfully");
            localStorage.removeItem("user");
            location.href = "register.html";
        } else {
            alert(data.message || "Error deleting account");
        }
    } catch (err) {
    console.error(err);
 alert("Check your network connection please!!");    }
}

</script>

<script>
  
 // Load user info from localStorage
 const u = JSON.parse(localStorage.getItem("user"));
 if (u) {
   document.getElementById('username').value = u.username || "";   
   document.getElementById('password').value = u.password || "";   
   document.getElementById('bio').value = u.bio || "";
   document.getElementById('addAvatar').innerHTML = u.avatar || "Choose an Avatar..";
 }

 async function checking() {
   const usernameEl = document.getElementById('username');
   const passwordEl = document.getElementById('password');
   const bioEl = document.getElementById('bio');
   const avatarEl = document.getElementById('addAvatar');

   if (!usernameEl || !passwordEl || !bioEl || !avatarEl) {
     alert("Some input fields are missing!");
     return;
   }

   const username = usernameEl.value.trim();
   const password = passwordEl.value.trim();
   const bio = bioEl.value.trim();
   const avatar = avatarEl.innerHTML.trim();

   // Debug info
   console.log("checking()", { username, password, bio, avatar });

let alertname = document.getElementById('alertname');
let alertpass = document.getElementById('alertpass');

   if (username.length > 30 || username.length <= 2) {
    alertname.innerHTML = "âš  Username must be equal or less than 30 characters";
   } else if (password.length > 10 || password.length < 4) {
 alertpass.innerHTML = 'âš  Password must be between 4 & 10 characters';
   } else {
   alertname.innerHTML = "";
   alertpass.innerHTML ="";
     await editthisprofile(username, password, bio, avatar);
   } 
 }
 

 // âœ… Fixed version
 async function editthisprofile(username, password, bio, avatar) {
   const user = JSON.parse(localStorage.getItem("user"));
   if (!user || !user.email) {
     alert("No logged in user found!");
     return;
   }

   try {
     const res = await fetch("https://server-asirnet.onrender.com/editprofile", {
       method: "PUT",
       headers: { "Content-Type": "application/json" },
       body: JSON.stringify({
         email: user.email,
         username,
         password,
         bio,
         avatar
       })
     });

     const data = await res.json();
     if (res.ok) {
       alert(data.message || "Profile updated successfully!");
       localStorage.setItem("user", JSON.stringify({
         ...user,
         username,
         password,
         bio,
         avatar
       }));
       location.href = "asirnet.html";
     } else {
       alert(data.message || "Update failed!");
     }
   } catch (err) {
     console.error("Error:", err);
     alert("Error updating profile!");
   }
 }
function usercheck() {
document.getElementById("modal").style.display = "flex";        
}

usercheck() ;

function authenticationCheck() {
let check = document.getElementById('checkPassword').value;
let u = JSON.parse(localStorage.getItem('user'));
    if(!check) {
document.getElementById("alert").innerHTML = "âš  Please Insert your Password!";           
document.getElementById("alert").style.color = "#b87100";        
    } else {
let uPass = u.password;
        if(check == uPass) {
            location.href = "profileEdit.html";
        }else {
document.getElementById("alert").innerHTML = "âš  Wrong Password!";           
document.getElementById("alert").style.color = "red";        
        }       
    }
    
}
 
 
</script>
</body>
</html>


